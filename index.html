<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phasmo-Tracker : Expert Edition</title>
  <style>
    :root {
      --bg: #0b0e14;
      --card-bg: #161b26;
      --header-bg: rgba(22, 27, 38, 0.9);
      --accent: #5eead4;
      --accent-glow: rgba(94, 234, 212, 0.2);
      --text: #e2e8f0;
      --muted: #94a3b8;
      --border: #2d3748;
      --danger: #f87171;
      --success: #34d399;
      --warning: #fbbf24;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    header {
      position: sticky;
      top: 0;
      background: var(--header-bg);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      padding: 1rem;
      z-index: 100;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo { font-weight: 900; color: var(--accent); letter-spacing: 1px; }

    .tabs { display: flex; gap: 1.5rem; }
    .tab { color: var(--muted); text-decoration: none; font-size: 0.9rem; font-weight: 600; transition: 0.3s; }
    .tab[data-active="true"] { color: var(--accent); text-shadow: 0 0 8px var(--accent-glow); }

    main { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }

    .dashboard { display: grid; grid-template-columns: 320px 1fr; gap: 2rem; }
    @media (max-width: 900px) { .dashboard { grid-template-columns: 1fr; } }

    .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; }
    h2 { font-size: 0.9rem; margin: 0 0 1rem 0; color: var(--accent); text-transform: uppercase; opacity: 0.8; }

    /* Preuves */
    .proof-item { padding: 10px 0; border-bottom: 1px solid #232a37; }
    .proof-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem; }
    .btn-group { display: flex; gap: 4px; }
    .btn-action {
      flex: 1; border: 1px solid var(--border); background: #1e2533; color: var(--muted);
      padding: 6px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: bold;
    }
    .btn-action[data-state="include"] { background: var(--success); color: #000; border-color: var(--success); }
    .btn-action[data-state="exclude"] { background: var(--danger); color: #fff; border-color: var(--danger); }

    /* FantÃ´mes */
    .ghost-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1rem; }
    .ghost-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; }
    .ghost-card.candidate { border-color: var(--accent); box-shadow: 0 4px 20px rgba(0,0,0,0.4); }
    
    .ghost-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    .ghost-name { font-size: 1.2rem; font-weight: 800; }
    .speed-tag { font-size: 0.7rem; background: #2d3748; padding: 2px 6px; border-radius: 4px; color: var(--warning); }

    .badge-list { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 12px; }
    .badge { font-size: 0.7rem; padding: 3px 8px; background: #0b0e14; border-radius: 4px; border: 1px solid var(--border); }
    .badge.ok { color: var(--success); border-color: var(--success); }
    .badge.no { color: var(--danger); border-color: var(--danger); text-decoration: line-through; opacity: 0.4; }

    /* Secrets Section */
    .secrets-btn {
      width: 100%; padding: 8px; background: #2d3748; border: none; color: white;
      border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 600;
    }
    .secrets-content {
      margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border);
      font-size: 0.85rem; display: none;
    }
    .secrets-content.open { display: block; }
    
    .test-box {
      background: rgba(0,0,0,0.2); border-left: 3px solid var(--accent);
      padding: 8px; margin: 8px 0; border-radius: 0 4px 4px 0;
    }
    .test-title { color: var(--accent); font-weight: bold; font-size: 0.75rem; text-transform: uppercase; }

    .reset-btn { background: var(--danger); color: white; border: none; padding: 12px; border-radius: 8px; width: 100%; cursor: pointer; font-weight: bold; }
  </style>
</head>
<body>

  <header>
    <div class="nav-container">
      <div class="logo">PHASMO-TRACKER <span style="font-weight:300; font-size:0.8rem">v2.0</span></div>
      <nav class="tabs">
        <a class="tab" href="#journal" data-active="true">Journal</a>
        <a class="tab" href="#options">Options</a>
      </nav>
    </div>
  </header>

  <main>
    <div id="journal" class="dashboard-section">
      <div class="dashboard">
        <aside class="card">
          <h2>Preuves ðŸ”Ž</h2>
          <div id="proof-list"></div>
          <div style="margin-top: 2rem">
            <h2>Candidats</h2>
            <div id="probables-mini" style="display:flex; flex-wrap:wrap; gap:5px"></div>
          </div>
        </aside>

        <section>
          <div class="ghost-grid" id="ghost-display"></div>
        </section>
      </div>
    </div>

    <div id="options" class="dashboard-section" style="display:none">
        <div class="card" style="max-width:400px; margin: 0 auto;">
            <h2>Menu Principal</h2>
            <button class="reset-btn" id="reset-all">Nouvelle Chasse (Reset)</button>
        </div>
    </div>
  </main>

<script>
const PROOFS = [
  { id:'emf', label:'ðŸ“¶ EMF Niveau 5' },
  { id:'orbe', label:'ðŸ”® Orbe Fantomatique' },
  { id:'spirit', label:'ðŸ“» Spirit Box' },
  { id:'freezing', label:'â„ï¸ Temp. Glaciales' },
  { id:'uv', label:'ðŸ‘£ Traces UV' },
  { id:'dots', label:'ðŸŸ¢ Projecteur D.O.T.S' },
  { id:'writing', label:'ðŸ“– Ã‰criture' },
];

const GHOST_DATA = [
  { 
    name:'Onryo', 
    proofs:['orbe','freezing','spirit'], 
    speed: "1.7 m/s",
    test: "Le Test de la Bougie : Il ne peut pas chasser Ã  moins de 4m d'une flamme allumÃ©e. S'il Ã©teint 3 bougies, il lancera obligatoirement une tentative de chasse peu importe la santÃ© mentale."
  },
  { 
    name:'Spectre', 
    proofs:['dots','emf','spirit'], 
    speed: "1.7 m/s",
    test: "Le Test du Sel : C'est le seul fantÃ´me qui ne marchera JAMAIS dans un tas de sel. S'il marche prÃ¨s du sel sans laisser de traces UV ou de bruit de pas dedans, c'est lui."
  },
  { 
    name:'Deogen', 
    proofs:['dots','writing','spirit'], 
    speed: "3.0 m/s âž” 0.4 m/s",
    test: "Le Cri Spirit Box : Si vous Ãªtes Ã  moins d'un mÃ¨tre, vous pouvez entendre un rÃ¢le lourd unique. En chasse : Il sait toujours oÃ¹ vous Ãªtes. Cachez-vous et il vous tuera, restez Ã  dÃ©couvert et loopez-le (il ralentit Ã©normÃ©ment proche de vous)."
  },
  { 
    name:'Hantu', 
    proofs:['orbe','uv','freezing'], 
    speed: "1.4 m/s âž” 2.7 m/s",
    test: "BuÃ©e de Chasse : S'il chasse dans une piÃ¨ce froide sans que le courant soit allumÃ©, vous verrez de la buÃ©e sortir de sa bouche. Il ne peut pas accÃ©lÃ©rer en vous voyant (pas de ligne de vue)."
  },
  { 
    name:'Obake', 
    proofs:['emf','orbe','uv'], 
    speed: "1.7 m/s",
    test: "Le Test de la Main : Il a une chance de laisser des empreintes Ã  6 doigts. En chasse, il a 6.66% de chances de changer de forme visuelle (clignotement) Ã  chaque cycle."
  },
  { 
    name:'Revenant', 
    proofs:['orbe','writing','freezing'], 
    speed: "1.0 m/s âž” 3.0 m/s",
    test: "Le Test du Silence : S'il ne vous voit pas et n'entend rien, il est le plus lent du jeu. DÃ¨s qu'il a une ligne de vue, il devient un missile. Si vous entendez des pas trÃ¨s lents qui sprintent d'un coup, fuyez."
  },
  { 
    name:'DÃ©mon', 
    proofs:['writing','uv','freezing'], 
    speed: "1.7 m/s",
    test: "Le Test du Crucifix : La portÃ©e du crucifix est augmentÃ©e (5m au lieu de 3m). Il peut attaquer dÃ¨s 100% de santÃ© mentale. L'encens ne le bloque que 60s (contre 90s normalement)."
  },
  { 
    name:'Le Mimic', 
    proofs:['spirit','uv','freezing'], 
    speed: "Variable",
    test: "La 4Ã¨me Preuve : Il prÃ©sente TOUJOURS des orbes fantomatiques, mÃªme si vous jouez en mode 'zÃ©ro preuve'. Si vous avez 4 preuves, c'est obligatoirement lui."
  },
  { 
    name:'Thaye', 
    proofs:['dots','orbe','writing'], 
    speed: "2.7 m/s âž” 1.0 m/s",
    test: "Le Test de l'Ã‚ge : Utilisez le Ouija pour demander son Ã¢ge. S'il vieillit au fur et Ã  mesure de la partie, c'est un Thaye. Il devient de moins en moins actif et de plus en plus lent avec le temps."
  },
  { 
    name:'Myling', 
    proofs:['writing','emf','uv'], 
    speed: "1.7 m/s",
    test: "Le Test de la Lampe : En chasse, si vous entendez ses pas UNIQUEMENT quand votre lampe commence Ã  clignoter, c'est un Myling (ses pas sont silencieux Ã  longue distance)."
  }
];

let state = { include: [], exclude: [] };

function render() {
  // Liste des preuves
  document.getElementById('proof-list').innerHTML = PROOFS.map(p => {
    const isInc = state.include.includes(p.id);
    const isExc = state.exclude.includes(p.id);
    return `
      <div class="proof-item">
        <span class="proof-label">${p.label}</span>
        <div class="btn-group">
          <button class="btn-action" data-state="${isInc?'include':''}" onclick="toggleProof('${p.id}', 'include')">OUI</button>
          <button class="btn-action" data-state="${isExc?'exclude':''}" onclick="toggleProof('${p.id}', 'exclude')">NON</button>
          <button class="btn-action" onclick="toggleProof('${p.id}', 'clear')">CLR</button>
        </div>
      </div>
    `;
  }).join('');

  // Logique de filtrage
  const candidates = GHOST_DATA.filter(g => {
    let ghostProofs = [...g.proofs];
    if (g.name === 'Le Mimic') ghostProofs.push('orbe');

    const hasAll = state.include.every(id => ghostProofs.includes(id));
    const noneExcluded = state.exclude.every(id => !ghostProofs.includes(id));
    return hasAll && noneExcluded;
  });

  // Rendu des cartes fantÃ´mes
  document.getElementById('probables-mini').innerHTML = candidates.map(g => `<span class="badge ok">${g.name}</span>`).join('');
  
  document.getElementById('ghost-display').innerHTML = candidates.map(g => `
    <div class="ghost-card candidate">
      <div class="ghost-header">
        <div class="ghost-name">${g.name}</div>
        <div class="speed-tag">âš¡ ${g.speed}</div>
      </div>
      <div class="badge-list">
        ${g.proofs.map(pID => {
          const p = PROOFS.find(x => x.id === pID);
          const cls = state.include.includes(pID) ? 'ok' : state.exclude.includes(pID) ? 'no' : '';
          return `<span class="badge ${cls}">${p.label}</span>`;
        }).join('')}
        ${g.name === 'Le Mimic' ? '<span class="badge" style="border-style:dashed">ðŸ”® Orbe (Factice)</span>' : ''}
      </div>
      <button class="secrets-btn" onclick="toggleSecrets(this)">PRO-TESTS & SECRETS â–¼</button>
      <div class="secrets-content">
        <div class="test-box">
          <div class="test-title">CapacitÃ© SpÃ©ciale</div>
          ${g.test || "Pas de test spÃ©cifique rÃ©pertoriÃ© pour ce fantÃ´me."}
        </div>
        <p style="font-size:0.75rem; margin-top:10px">ðŸ’¡ <i>Conseil : Utilisez l'encens pour confirmer si le test Ã©choue.</i></p>
      </div>
    </div>
  `).join('');
}

function toggleProof(id, action) {
  state.include = state.include.filter(x => x !== id);
  state.exclude = state.exclude.filter(x => x !== id);
  if (action === 'include') state.include.push(id);
  if (action === 'exclude') state.exclude.push(id);
  render();
}

function toggleSecrets(btn) {
  const content = btn.nextElementSibling;
  content.classList.toggle('open');
  btn.textContent = content.classList.contains('open') ? 'FERMER DÃ‰TAILS â–²' : 'PRO-TESTS & SECRETS â–¼';
}

document.getElementById('reset-all').onclick = () => {
    state = { include: [], exclude: [] };
    render();
    alert("Journal rÃ©initialisÃ© pour la prochaine mission !");
};

// Nav
document.querySelectorAll('.tab').forEach(tab => {
    tab.onclick = (e) => {
        e.preventDefault();
        document.querySelectorAll('.dashboard-section').forEach(s => s.style.display = 'none');
        document.querySelectorAll('.tab').forEach(t => t.dataset.active = "false");
        document.getElementById(tab.getAttribute('href').substring(1)).style.display = 'block';
        tab.dataset.active = "true";
    }
});

render();
</script>
</body>
</html>
