<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PHASMO-TRACKER v6.2 (Horizontal)</title>
  <style>
    :root {
      --bg: #0f172a; --panel: #1e293b; --accent: #2dd4bf; --text: #f1f5f9;
      --border: #334155; --danger: #ef4444; --success: #10b981; --warn: #f59e0b;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); display: flex; flex-direction: column; min-height: 100vh; }

    /* HEADER */
    header {
      position: sticky; top: 0; z-index: 999;
      background: rgba(15, 23, 42, 0.95);
      border-bottom: 1px solid var(--border); padding: 10px 20px;
      display: flex; justify-content: space-between; align-items: center;
      backdrop-filter: blur(8px);
    }
    .brand { font-weight: 900; color: var(--accent); font-size: 1.1rem; }
    
    .nav-pills { display: flex; gap: 5px; background: #020617; padding: 4px; border-radius: 8px; border: 1px solid var(--border); }
    .nav-item {
      background: transparent; border: none; color: #94a3b8; 
      padding: 6px 14px; cursor: pointer; font-weight: 600; border-radius: 6px; transition: 0.2s;
    }
    .nav-item.active { background: var(--accent); color: #0f172a; }
    .btn-reset { background: var(--danger); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: bold; }

    /* LAYOUT HORIZONTAL FORC√â */
    .container {
      display: grid;
      grid-template-columns: 320px 1fr; /* Colonne gauche fixe, droite flexible */
      gap: 20px;
      max-width: 1600px;
      margin: 20px auto;
      padding: 0 20px;
      flex: 1;
      width: 100%;
    }

    /* BARRE LAT√âRALE GAUCHE */
    aside { 
      display: flex; flex-direction: column; gap: 15px; 
      position: sticky; top: 80px; height: fit-content; /* Reste visible au scroll */
    }
    
    .main-content { min-width: 0; }
    .card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 15px; }

    /* FOOTER */
    footer {
      text-align: center; padding: 20px; margin-top: 20px;
      border-top: 1px solid var(--border); color: #64748b; font-size: 0.9rem;
      background: #0b1120;
    }
    .creator { color: var(--accent); font-weight: bold; letter-spacing: 0.5px; }

    /* TIMER */
    .timer-box { text-align: center; margin-bottom: 10px; }
    .timer-val { font-family: monospace; font-size: 2.5rem; color: var(--warn); font-weight: bold; background: #020617; border-radius: 8px; padding: 5px; border: 1px solid var(--border); }
    .timer-actions { display: flex; gap: 5px; margin-top: 10px; }
    .btn-time { flex: 1; padding: 8px; background: #334155; border: 1px solid var(--border); color: white; border-radius: 6px; cursor: pointer; font-weight: bold; }
    .btn-time.active { background: var(--warn); color: black; border-color: var(--warn); }

    /* PREUVES */
    .proof-row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; border-bottom: 1px solid #334155; }
    .proof-label { font-size: 0.9rem; font-weight: 600; }
    .btn-proof { padding: 4px 8px; border: 1px solid var(--border); background: #0f172a; color: #64748b; border-radius: 4px; cursor: pointer; font-size: 0.75rem; font-weight: bold; margin-left: 3px; }
    .btn-proof[data-status="yes"] { background: var(--success); color: #020617; border-color: var(--success); }
    .btn-proof[data-status="no"] { background: var(--danger); color: white; border-color: var(--danger); }

    /* GRILLE FANT√îMES */
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; }
    .ghost { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 15px; position: relative; transition: 0.2s; }
    .ghost.excluded { opacity: 0.3; filter: grayscale(1); order: 2; }
    .ghost.candidate { opacity: 1; border-color: var(--accent); box-shadow: 0 0 15px rgba(45, 212, 191, 0.1); order: 1; }
    .ghost.danger { border-left: 4px solid var(--danger); }
    .g-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .g-name { font-size: 1.2rem; font-weight: 800; }
    .badge { display: inline-block; font-size: 0.7rem; padding: 2px 6px; background: #020617; border: 1px solid #334155; border-radius: 4px; margin: 0 3px 3px 0; color: #94a3b8; }
    .badge.match { color: var(--success); border-color: var(--success); }
    .btn-secret { width: 100%; background: #334155; border: none; padding: 6px; border-radius: 6px; color: #cbd5e1; cursor: pointer; font-size: 0.8rem; margin-top: 8px; }
    .secret-txt { display: none; margin-top: 8px; padding: 8px; background: rgba(0,0,0,0.2); border-left: 2px solid var(--accent); font-size: 0.85rem; line-height: 1.4; }

    /* VUE EMPLACEMENTS (Tableau) */
    #view-maps { display: none; }
    .map-select { width: 100%; padding: 15px; background: var(--panel); color: white; border: 1px solid var(--accent); border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin-bottom: 20px; }
    .loc-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
    .loc-card { background: #020617; border: 1px solid var(--border); border-radius: 8px; padding: 15px; display: flex; align-items: center; gap: 15px; }
    .loc-icon { font-size: 2rem; }
    .loc-info h4 { margin: 0 0 5px 0; color: var(--accent); font-size: 1rem; }
    .loc-info p { margin: 0; color: #94a3b8; font-size: 0.9rem; }

    /* Responsive uniquement sur Mobile (Portrait) */
    @media(max-width: 768px){ 
      .container { grid-template-columns: 1fr; } 
      aside { position: relative; top: 0; width: 100%; }
    }
  </style>
</head>
<body>

<header>
  <div class="brand">PHASMO-TRACKER v6.2</div>
  <div class="nav-pills">
    <button class="nav-item active" onclick="setTab('tracker', this)">JOURNAL</button>
    <button class="nav-item" onclick="setTab('maps', this)">OBJETS</button>
  </div>
  <button class="btn-reset" onclick="resetAll()">RESET</button>
</header>

<div class="container">
  
  <aside>
    <div class="card">
      <div class="timer-box"><div class="timer-val" id="timer-disp">00:00</div></div>
      <div class="timer-actions">
        <button class="btn-time" onclick="runTimer(90, this)">90s</button>
        <button class="btn-time" onclick="runTimer(180, this)">180s</button>
        <button class="btn-time" style="background:#450a0a" onclick="stopTimer()">X</button>
      </div>
    </div>

    <div class="card">
      <div style="display:flex; justify-content:space-between; margin-bottom:5px">
        <span style="font-size:0.9rem; font-weight:bold">Sant√© Mentale</span>
        <span style="color:var(--accent); font-weight:bold" id="san-disp">100%</span>
      </div>
      <input type="range" min="0" max="100" value="100" style="width:100%" oninput="setSan(this.value)">
    </div>

    <div class="card" id="proofs-list"></div>
  </aside>

  <div class="main-content">
    
    <div id="tab-tracker" class="grid"></div>

    <div id="tab-maps">
      <select class="map-select" onchange="loadLocs(this.value)">
        <option value="">-- CHOISIR UNE CARTE --</option>
        <option value="tanglewood">6 Tanglewood Drive</option>
        <option value="willow">Willow Street</option>
        <option value="edgefield">42 Edgefield Road</option>
        <option value="ridgeview">10 Ridgeview Court</option>
        <option value="grafton">Grafton Farmhouse</option>
        <option value="bleasdale">Bleasdale Farmhouse</option>
        <option value="woodwind">Camp Woodwind</option>
        <option value="prison">Prison</option>
        <option value="sunny">Sunny Meadows</option>
      </select>
      
      <div id="loc-area">
        <div style="text-align:center; color:#64748b; margin-top:50px">S√©lectionnez une carte pour voir la liste des objets.</div>
      </div>
    </div>

  </div>
</div>

<footer>
  Cr√©√© par <span class="creator">Joshua Sebag</span>
</footer>

<script>
/* ================= DONN√âES ================= */
const PROOFS = [
  { id:'emf', label:'EMF Niv 5' }, { id:'orb', label:'Orbe' },
  { id:'box', label:'Spirit Box' }, { id:'frz', label:'Glacial' },
  { id:'uv', label:'Traces UV' }, { id:'dot', label:'D.O.T.S' }, { id:'wrt', label:'√âcriture' }
];

const GHOSTS = [
  { n:'Esprit', p:['emf','box','wrt'], th:50, sp:'1.7', t:'Encens bloque 180s.' },
  { n:'Spectre', p:['dot','emf','box'], th:50, sp:'1.7', t:'Ne marche jamais dans le sel.' },
  { n:'Fant√¥me', p:['dot','uv','box'], th:50, sp:'1.7', t:'Dispara√Æt en photo.' },
  { n:'Poltergeist', p:['uv','box','wrt'], th:50, sp:'1.7', t:'Lance plusieurs objets.' },
  { n:'Banshee', p:['dot','orb','uv'], th:50, sp:'1.7', t:'Cible un seul joueur.' },
  { n:'Djinn', p:['emf','uv','frz'], th:50, sp:'2.5', t:'Rapide si courant ON.' },
  { n:'Jument', p:['orb','box','wrt'], th:60, sp:'1.7', t:'Attaque dans le noir.' },
  { n:'Revenant', p:['orb','wrt','frz'], th:50, sp:'3.0', t:'Rapide si vu (3m/s).' },
  { n:'Ombre', p:['emf','wrt','frz'], th:35, sp:'1.7', t:'Timide si group√©s.' },
  { n:'D√©mon', p:['wrt','uv','frz'], th:70, sp:'1.7', t:'Attaque tr√®s souvent.' },
  { n:'Yurei', p:['dot','orb','frz'], th:50, sp:'1.7', t:'Claque les portes.' },
  { n:'Oni', p:['dot','emf','frz'], th:50, sp:'1.7', t:'Tr√®s visible en chasse.' },
  { n:'Yokai', p:['dot','orb','box'], th:80, sp:'1.7', t:'Entend mal (2m).' },
  { n:'Hantu', p:['orb','uv','frz'], th:50, sp:'2.7', t:'Rapide au froid.' },
  { n:'Goryo', p:['dot','emf','uv'], th:50, sp:'1.7', t:'DOTS vid√©o seulement.' },
  { n:'Myling', p:['wrt','emf','uv'], th:50, sp:'1.7', t:'Pas silencieux.' },
  { n:'Onryo', p:['orb','frz','box'], th:60, sp:'1.7', t:'Peur du feu.' },
  { n:'Jumeaux', p:['emf','frz','box'], th:50, sp:'Var', t:'Double interactions.' },
  { n:'Raiju', p:['dot','emf','orb'], th:65, sp:'2.5', t:'Boost√© par √©lectronique.' },
  { n:'Obake', p:['emf','orb','uv'], th:50, sp:'1.7', t:'Empreinte 6 doigts.' },
  { n:'Mimic', p:['box','uv','frz'], th:50, sp:'Var', t:'A toujours des orbes (4e).' },
  { n:'Moroi', p:['box','wrt','frz'], th:50, sp:'Var', t:'Vitesse selon SAN.' },
  { n:'Deogen', p:['dot','wrt','box'], th:40, sp:'3.0', t:'Sait o√π vous √™tes.' },
  { n:'Thaye', p:['dot','orb','wrt'], th:75, sp:'2.7', t:'Vieillit et ralentit.' }
];

const LOCATIONS = {
  'tanglewood': [
    { i:'üîÆ', n:'Miroir', l:'Salon (Mur vers chambre parentale)' },
    { i:'üß©', n:'Ouija', l:'Sous-sol (Fond √† gauche)' },
    { i:'üß∏', n:'Poup√©e', l:'Garage (Poubelle)' },
    { i:'‚≠ï', n:'Cercle', l:'Sous-sol' },
    { i:'üÉè', n:'Tarot', l:'Salon (Table basse)' },
    { i:'üì¶', n:'Bo√Æte', l:'Nursery (Chambre b√©b√©)' },
    { i:'‚úã', n:'Patte', l:'Salle √† manger (Meuble vitr√©)' }
  ],
  'willow': [
    { i:'üîÆ', n:'Miroir', l:'Couloir (Coin buanderie)' },
    { i:'üß©', n:'Ouija', l:'Garage (Buanderie)' },
    { i:'üß∏', n:'Poup√©e', l:'Chambre gar√ßons (Armoire)' },
    { i:'‚≠ï', n:'Cercle', l:'Sous-sol' },
    { i:'üÉè', n:'Tarot', l:'Salon (Table basse)' },
    { i:'üì¶', n:'Bo√Æte', l:'Salon (Sur meuble TV)' },
    { i:'‚úã', n:'Patte', l:'Couloir (Meuble)' }
  ],
  'edgefield': [
    { i:'üîÆ', n:'Miroir', l:'1er √©tage (Bas escalier)' },
    { i:'üß©', n:'Ouija', l:'Buanderie (Arri√®re cuisine)' },
    { i:'üß∏', n:'Poup√©e', l:'1er √©tage (Chambre ado grande)' },
    { i:'‚≠ï', n:'Cercle', l:'Sous-sol' },
    { i:'üÉè', n:'Tarot', l:'Entr√©e (Table derri√®re porte)' },
    { i:'üì¶', n:'Bo√Æte', l:'Salon' },
    { i:'‚úã', n:'Patte', l:'Cuisine (Table)' }
  ],
  'ridgeview': [
    { i:'üîÆ', n:'Miroir', l:'Rez-de-chauss√©e (Escaliers)' },
    { i:'üß©', n:'Ouija', l:'Buanderie' },
    { i:'üß∏', n:'Poup√©e', l:'Couloir RDC (En face)' },
    { i:'‚≠ï', n:'Cercle', l:'Sous-sol' },
    { i:'üÉè', n:'Tarot', l:'Entr√©e (Commode)' },
    { i:'üì¶', n:'Bo√Æte', l:'Chambre Fille (2e √©tage)' },
    { i:'‚úã', n:'Patte', l:'Chambre Gar√ßon (2e √©tage)' }
  ],
  'grafton': [
    { i:'üîÆ', n:'Miroir', l:'Salon (Coin chemin√©e)' },
    { i:'üß©', n:'Ouija', l:'Chambre Master (Placard)' },
    { i:'üß∏', n:'Poup√©e', l:'Nursery (√âtage)' },
    { i:'‚≠ï', n:'Cercle', l:'Entrep√¥t' },
    { i:'üÉè', n:'Tarot', l:'Salle √† manger' },
    { i:'üì¶', n:'Bo√Æte', l:'Entr√©e' },
    { i:'‚úã', n:'Patte', l:'Chambre Jumelle (√âtage)' }
  ],
  'woodwind': [
    { i:'üîÆ', n:'Miroir', l:'Tente d√©part (Arbre)' },
    { i:'üß©', n:'Ouija', l:'Zone Jeux' },
    { i:'üß∏', n:'Poup√©e', l:'Tente rouge (Nourriture)' },
    { i:'‚≠ï', n:'Cercle', l:'Tente Nourriture' },
    { i:'üÉè', n:'Tarot', l:'Entr√©e (Sur table)' },
    { i:'üì¶', n:'Bo√Æte', l:'Tente Jaune' },
    { i:'‚úã', n:'Patte', l:'Zone Feu de camp' }
  ],
  'bleasdale': [
    { i:'üîÆ', n:'Miroir', l:'Bureau (RDC)' },
    { i:'üß©', n:'Ouija', l:'Atelier' },
    { i:'üß∏', n:'Poup√©e', l:'Couloir (2e √©tage)' },
    { i:'‚≠ï', n:'Cercle', l:'Grenier' },
    { i:'üÉè', n:'Tarot', l:'Bureau (RDC)' },
    { i:'üì¶', n:'Bo√Æte', l:'Salon' },
    { i:'‚úã', n:'Patte', l:'Chambre Master' }
  ],
  'prison': [
    { i:'üîÆ', n:'Miroir', l:'Entr√©e (Chaises)' },
    { i:'üß©', n:'Ouija', l:'Arri√®re cellules A' },
    { i:'üß∏', n:'Poup√©e', l:'Accueil (Bureau)' },
    { i:'‚≠ï', n:'Cercle', l:'Caf√©t√©ria' },
    { i:'üÉè', n:'Tarot', l:'Entr√©e (D√©tecteurs)' },
    { i:'üì¶', n:'Bo√Æte', l:'Entr√©e (Casiers)' },
    { i:'‚úã', n:'Patte', l:'Visiteurs' }
  ],
  'sunny': [
    { i:'üîÆ', n:'Miroir', l:'Chapelle' },
    { i:'üß©', n:'Ouija', l:'Chapelle' },
    { i:'üß∏', n:'Poup√©e', l:'Chapelle' },
    { i:'‚≠ï', n:'Cercle', l:'Chapelle' },
    { i:'üÉè', n:'Tarot', l:'Chapelle' },
    { i:'üì¶', n:'Bo√Æte', l:'Chapelle' },
    { i:'‚úã', n:'Patte', l:'Chapelle' }
  ]
};

/* ================= LOGIQUE ================= */
let state = { inc: [], exc: [], san: 100 };
let tInterval = null;

function init() {
  document.getElementById('proofs-list').innerHTML = PROOFS.map(p => `
    <div class="proof-row">
      <span class="proof-label">${p.label}</span>
      <div>
        <button id="btn-inc-${p.id}" class="btn-proof" onclick="toggle('${p.id}','inc')">OUI</button>
        <button id="btn-exc-${p.id}" class="btn-proof" onclick="toggle('${p.id}','exc')">NON</button>
        <button class="btn-proof" onclick="toggle('${p.id}','clr')">CLR</button>
      </div>
    </div>
  `).join('');
  render();
}

function toggle(pid, type) {
  state.inc = state.inc.filter(x => x !== pid);
  state.exc = state.exc.filter(x => x !== pid);
  if (type === 'inc') state.inc.push(pid);
  if (type === 'exc') state.exc.push(pid);
  render();
}

function render() {
  // Boutons
  PROOFS.forEach(p => {
    const bInc = document.getElementById(`btn-inc-${p.id}`);
    const bExc = document.getElementById(`btn-exc-${p.id}`);
    bInc.removeAttribute('data-status');
    bExc.removeAttribute('data-status');
    if (state.inc.includes(p.id)) bInc.setAttribute('data-status', 'yes');
    if (state.exc.includes(p.id)) bExc.setAttribute('data-status', 'no');
  });

  // Fant√¥mes
  document.getElementById('tab-tracker').innerHTML = GHOSTS.map(g => {
    let gp = [...g.p]; if (g.n === 'Mimic') gp.push('orb');

    const allInc = state.inc.every(id => gp.includes(id));
    const noneExc = state.exc.every(id => {
       if (g.n === 'Mimic' && id === 'orb') return false; 
       return !gp.includes(id);
    });

    const isMatch = allInc && noneExc;
    const canHunt = state.san <= g.th;
    
    let cls = 'ghost';
    if (!isMatch) cls += ' excluded'; else cls += ' candidate';
    if (isMatch && canHunt) cls += ' danger';

    return `
      <div class="${cls}">
        <div class="g-head">
          <span class="g-name">${g.n}</span>
          ${isMatch && canHunt ? '<span style="color:var(--danger)">‚ö†Ô∏è</span>' : ''}
        </div>
        <div class="g-info">Seuil: ${g.th}% | Vitesse: ${g.sp}m/s</div>
        <div style="margin-bottom:5px">
          ${g.p.map(pid => {
            const lbl = PROOFS.find(x=>x.id===pid).label;
            const match = state.inc.includes(pid) ? 'match' : '';
            return `<span class="badge ${match}">${lbl}</span>`;
          }).join('')}
          ${g.n==='Mimic' ? '<span class="badge" style="border:1px dashed #555">Fake Orbe</span>' : ''}
        </div>
        <button class="btn-secret" onclick="this.nextElementSibling.style.display='block'">TEST</button>
        <div class="secret-txt">${g.t}</div>
      </div>
    `;
  }).join('');
}

function setSan(val) {
  state.san = val;
  document.getElementById('san-disp').innerText = val + "%";
  render();
}

/* ================= CARTES (TEXTE) ================= */
function loadLocs(key) {
  const area = document.getElementById('loc-area');
  if (!key || !LOCATIONS[key]) {
    area.innerHTML = '<div style="text-align:center; color:#64748b; margin-top:50px">S√©lectionnez une carte pour voir les objets.</div>';
    return;
  }
  
  const items = LOCATIONS[key];
  area.innerHTML = `<div class="loc-grid">
    ${items.map(item => `
      <div class="loc-card">
        <div class="loc-icon">${item.i}</div>
        <div class="loc-info">
          <h4>${item.n}</h4>
          <p>${item.l}</p>
        </div>
      </div>
    `).join('')}
  </div>`;
}

function setTab(tab, btn) {
  document.getElementById('tab-tracker').style.display = tab === 'tracker' ? 'grid' : 'none';
  document.getElementById('tab-maps').style.display = tab === 'maps' ? 'block' : 'none';
  document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

/* ================= TIMER ================= */
function runTimer(sec, btn) {
  clearInterval(tInterval);
  document.querySelectorAll('.btn-time').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  let t = sec;
  const tick = () => {
    let m = Math.floor(t/60).toString().padStart(2,'0');
    let s = (t%60).toString().padStart(2,'0');
    document.getElementById('timer-disp').innerText = `${m}:${s}`;
  };
  tick();
  tInterval = setInterval(() => {
    t--; tick();
    if(t<=0) {
      clearInterval(tInterval);
      document.getElementById('timer-disp').innerText = "PRET";
      const ctx = new (window.AudioContext||window.webkitAudioContext)();
      const o = ctx.createOscillator(); o.connect(ctx.destination);
      o.start(); o.stop(ctx.currentTime+0.2);
    }
  }, 1000);
}

function stopTimer() {
  clearInterval(tInterval);
  document.getElementById('timer-disp').innerText = "00:00";
  document.querySelectorAll('.btn-time').forEach(b => b.classList.remove('active'));
}

function resetAll() {
  state = { inc: [], exc: [], san: 100 };
  document.querySelector('input[type="range"]').value = 100;
  setSan(100);
  stopTimer();
  render();
}

init();
</script>
</body>
</html>
