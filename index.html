<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phasmo-Tracker : EncyclopÃ©die ComplÃ¨te</title>
  <style>
    :root {
      --bg: #0b0e14; --card-bg: #161b26; --header-bg: rgba(22, 27, 38, 0.9);
      --accent: #5eead4; --accent-glow: rgba(94, 234, 212, 0.2);
      --text: #e2e8f0; --muted: #94a3b8; --border: #2d3748;
      --danger: #f87171; --success: #34d399; --warning: #fbbf24;
    }
    body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); }
    header { position: sticky; top: 0; background: var(--header-bg); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); padding: 1rem; z-index: 100; }
    .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
    .logo { font-weight: 900; color: var(--accent); letter-spacing: 1px; }
    main { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
    .dashboard { display: grid; grid-template-columns: 320px 1fr; gap: 2rem; }
    @media (max-width: 900px) { .dashboard { grid-template-columns: 1fr; } }
    .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; position: sticky; top: 100px; }
    .search-input { width: 100%; background: #0b0e14; border: 1px solid var(--border); padding: 10px; border-radius: 6px; color: white; margin-bottom: 1rem; }
    .proof-item { padding: 8px 0; border-bottom: 1px solid #232a37; }
    .btn-group { display: flex; gap: 4px; margin-top: 5px; }
    .btn-action { flex: 1; border: 1px solid var(--border); background: #1e2533; color: var(--muted); padding: 5px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: bold; }
    .btn-action[data-state="include"] { background: var(--success); color: #000; }
    .btn-action[data-state="exclude"] { background: var(--danger); color: #fff; }
    .ghost-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 1rem; }
    .ghost-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; transition: 0.3s; }
    .ghost-card.candidate { border-color: var(--accent); box-shadow: 0 4px 20px rgba(0,0,0,0.4); }
    .ghost-card.hidden { display: none; }
    .ghost-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
    .ghost-name { font-size: 1.2rem; font-weight: 800; }
    .speed-tag { font-size: 0.7rem; background: #2d3748; padding: 2px 6px; border-radius: 4px; color: var(--warning); }
    .badge-list { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 12px; }
    .badge { font-size: 0.7rem; padding: 3px 8px; background: #0b0e14; border-radius: 4px; border: 1px solid var(--border); }
    .badge.ok { color: var(--success); border-color: var(--success); }
    .badge.no { color: var(--danger); border-color: var(--danger); text-decoration: line-through; opacity: 0.4; }
    .secrets-btn { width: 100%; padding: 8px; background: #2d3748; border: none; color: white; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 600; }
    .secrets-content { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); font-size: 0.85rem; display: none; }
    .secrets-content.open { display: block; }
    .test-box { background: rgba(0,0,0,0.2); border-left: 3px solid var(--accent); padding: 8px; margin: 8px 0; border-radius: 0 4px 4px 0; }
    .test-title { color: var(--accent); font-weight: bold; font-size: 0.75rem; text-transform: uppercase; }
  </style>
</head>
<body>

<header>
  <div class="nav-container">
    <div class="logo">PHASMO-TRACKER <span style="font-weight:300; font-size:0.8rem">FULL v2.5</span></div>
    <button onclick="resetAll()" style="background:var(--danger); border:none; color:white; padding:5px 15px; border-radius:4px; cursor:pointer; font-weight:bold">RESET</button>
  </div>
</header>

<main>
  <div class="dashboard">
    <aside>
      <div class="card">
        <input type="text" id="ghost-search" class="search-input" placeholder="Chercher un nom..." oninput="render()">
        <h2>Preuves ðŸ”Ž</h2>
        <div id="proof-list"></div>
      </div>
    </aside>

    <section>
      <div class="ghost-grid" id="ghost-display"></div>
    </section>
  </div>
</main>

<script>
const PROOFS = [
  { id:'emf', label:'ðŸ“¶ EMF Niveau 5' }, { id:'orbe', label:'ðŸ”® Orbe' },
  { id:'spirit', label:'ðŸ“» Spirit Box' }, { id:'freezing', label:'â„ï¸ Glacial' },
  { id:'uv', label:'ðŸ‘£ Traces UV' }, { id:'dots', label:'ðŸŸ¢ D.O.T.S' }, { id:'writing', label:'ðŸ“– Ã‰criture' }
];

const GHOST_DATA = [
  { name:'Esprit', proofs:['emf','spirit','writing'], speed:"1.7 m/s", test:"Encens : Bloque ses chasses pendant 180s (au lieu de 90s)." },
  { name:'Spectre', proofs:['dots','emf','spirit'], speed:"1.7 m/s", test:"Sel : Ne laisse jamais d'empreinte de pas dans le sel." },
  { name:'FantÃ´me', proofs:['dots','uv','spirit'], speed:"1.7 m/s", test:"Photo : Si vous le prenez en photo pendant une manifestation, il disparaÃ®t instantanÃ©ment." },
  { name:'Poltergeist', proofs:['uv','spirit','writing'], speed:"1.7 m/s", test:"Lancer : Peut lancer plusieurs objets d'un coup. Baisse la santÃ© mentale de 2% par objet lancÃ©." },
  { name:'Banshee', proofs:['dots','orbe','uv'], speed:"1.7 m/s", test:"Micro Parabolique : PossÃ¨de un cri rare unique. Ne cible qu'une seule personne (sa cible)." },
  { name:'Djinn', proofs:['emf','uv','freezing'], speed:"1.7 - 2.5 m/s", test:"Courant : Ne peut pas couper le disjoncteur lui-mÃªme. AccÃ©lÃ¨re si le courant est ON et qu'il vous voit de loin." },
  { name:'Jument', proofs:['orbe','spirit','writing'], speed:"1.7 m/s", test:"Interrupteur : Peut Ã©teindre une lumiÃ¨re immÃ©diatement aprÃ¨s que vous l'ayez allumÃ©e. Ne peut pas allumer de lumiÃ¨re." },
  { name:'Revenant', proofs:['orbe','writing','freezing'], speed:"1.0 - 3.0 m/s", test:"Vitesse : TrÃ¨s lent si cachÃ©, extrÃªmement rapide dÃ¨s qu'il a une ligne de vue." },
  { name:'Ombre', proofs:['emf','writing','freezing'], speed:"1.7 m/s", test:"Interaction : TrÃ¨s peu actif si vous Ãªtes plusieurs dans la piÃ¨ce. Ne peut pas chasser si vous Ãªtes Ã  plusieurs sur lui." },
  { name:'DÃ©mon', proofs:['writing','uv','freezing'], speed:"1.7 m/s", test:"AgressivitÃ© : Peut chasser Ã  n'importe quel % de santÃ© mentale. Crucifix efficace Ã  5m." },
  { name:'Yurei', proofs:['dots','orbe','freezing'], speed:"1.7 m/s", test:"Porte : Peut claquer une porte de loin, ce qui draine 15% de santÃ© mentale instantanÃ©ment." },
  { name:'Oni', proofs:['dots','emf','freezing'], speed:"1.7 m/s", test:"VisibilitÃ© : Clignote trÃ¨s peu en chasse (trÃ¨s visible). Ne peut pas faire l'Ã©vÃ©nement 'boule de fumÃ©e'." },
  { name:'Yokai', proofs:['dots','orbe','spirit'], speed:"1.7 m/s", test:"Voix : Peut chasser dÃ¨s 80% si vous parlez prÃ¨s de lui. En chasse, il ne vous entend qu'Ã  moins de 2m." },
  { name:'Hantu', proofs:['orbe','uv','freezing'], speed:"1.4 - 2.7 m/s", test:"Froid : Rapide dans le froid, lent dans le chaud. Ne peut pas accÃ©lÃ©rer en vous voyant." },
  { name:'Goryo', proofs:['dots','emf','uv'], speed:"1.7 m/s", test:"D.O.T.S : Uniquement visible via une camÃ©ra et si personne n'est dans sa piÃ¨ce." },
  { name:'Myling', proofs:['writing','emf','uv'], speed:"1.7 m/s", test:"Audio : Ses bruits de pas sont inaudibles si sa voix ne fait pas clignoter votre lampe." },
  { name:'Onryo', proofs:['orbe','freezing','spirit'], speed:"1.7 m/s", test:"Bougie : Ã‰teindre une bougie peut dÃ©clencher une chasse. La flamme agit comme un crucifix (4m)." },
  { name:'Les Jumeaux', proofs:['emf','freezing','spirit'], speed:"1.5 - 1.9 m/s", test:"Courbe : Peuvent interagir Ã  deux endroits diffÃ©rents en mÃªme temps." },
  { name:'Raiju', proofs:['dots','emf','orbe'], speed:"1.7 - 2.5 m/s", test:"Ã‰lectronique : AccÃ©lÃ¨re prÃ¨s des Ã©quipements Ã©lectroniques actifs au sol." },
  { name:'Obake', proofs:['emf','orbe','uv'], speed:"1.7 m/s", test:"MÃ©tamorphe : Chance de laisser des empreintes Ã  6 doigts. Change de forme briÃ¨vement en chasse." },
  { name:'Le Mimic', proofs:['spirit','uv','freezing'], speed:"Variable", test:"Orbes : Affiche toujours des Orbes en plus de ses 3 preuves (donc 4 preuves au total)." },
  { name:'Moroi', proofs:['spirit','writing','freezing'], speed:"1.5 - 2.2 m/s", test:"MalÃ©diction : Si vous avez une rÃ©ponse Spirit Box, votre santÃ© mentale fond trÃ¨s vite. Plus vous Ãªtes fou, plus il court vite." },
  { name:'Deogen', proofs:['dots','writing','spirit'], speed:"3.0 - 0.4 m/s", test:"InÃ©vitable : Il sait toujours oÃ¹ vous Ãªtes. TrÃ¨s rapide loin, ralentit Ã©normÃ©ment Ã  votre contact (ne vous cachez pas !)." },
  { name:'Thaye', proofs:['dots','orbe','writing'], speed:"2.7 - 1.0 m/s", test:"Vieillissement : TrÃ¨s actif et rapide au dÃ©but, devient lent et inactif Ã  la fin de la partie." }
];

let state = { include: [], exclude: [] };

function render() {
  const searchQ = document.getElementById('ghost-search').value.toLowerCase();
  
  document.getElementById('proof-list').innerHTML = PROOFS.map(p => {
    const isInc = state.include.includes(p.id);
    const isExc = state.exclude.includes(p.id);
    return `<div class="proof-item"><span style="font-size:0.9rem">${p.label}</span><div class="btn-group">
      <button class="btn-action" data-state="${isInc?'include':''}" onclick="toggleProof('${p.id}','include')">OUI</button>
      <button class="btn-action" data-state="${isExc?'exclude':''}" onclick="toggleProof('${p.id}','exclude')">NON</button>
      <button class="btn-action" onclick="toggleProof('${p.id}','clear')">CLR</button>
    </div></div>`;
  }).join('');

  const candidates = GHOST_DATA.filter(g => {
    let gp = [...g.proofs]; if(g.name === 'Le Mimic') gp.push('orbe');
    const hasAll = state.include.every(id => gp.includes(id));
    const noneExc = state.exclude.every(id => !gp.includes(id));
    const matchesSearch = g.name.toLowerCase().includes(searchQ);
    return hasAll && noneExc && matchesSearch;
  });

  document.getElementById('ghost-display').innerHTML = candidates.map(g => `
    <div class="ghost-card candidate">
      <div class="ghost-header">
        <div class="ghost-name">${g.name}</div>
        <div class="speed-tag">âš¡ ${g.speed}</div>
      </div>
      <div class="badge-list">
        ${g.proofs.map(pID => {
          const p = PROOFS.find(x => x.id === pID);
          const cls = state.include.includes(pID) ? 'ok' : state.exclude.includes(pID) ? 'no' : '';
          return `<span class="badge ${cls}">${p.label}</span>`;
        }).join('')}
        ${g.name==='Le Mimic'?'<span class="badge" style="border:1px dashed var(--warning)">ðŸ”® Orbe (Fake)</span>':''}
      </div>
      <button class="secrets-btn" onclick="this.nextElementSibling.classList.toggle('open')">CAPACITÃ‰ & TEST â–¼</button>
      <div class="secrets-content">
        <div class="test-box"><div class="test-title">Secret du Chasseur</div>${g.test}</div>
      </div>
    </div>
  `).join('');
}

function toggleProof(id, action) {
  state.include = state.include.filter(x => x !== id);
  state.exclude = state.exclude.filter(x => x !== id);
  if (action === 'include') state.include.push(id);
  if (action === 'exclude') state.exclude.push(id);
  render();
}

function resetAll() { state = { include: [], exclude: [] }; render(); }
render();
</script>
</body>
</html>
