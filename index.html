<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PHASMO-TRACKER v3.0 | Expert Edition</title>
  <style>
    :root {
      --bg: #0b0e14; --card-bg: #161b26; --header-bg: rgba(22, 27, 38, 0.95);
      --accent: #5eead4; --text: #e2e8f0; --muted: #94a3b8; --border: #2d3748;
      --danger: #f87171; --success: #34d399; --warning: #fbbf24;
    }
    body { margin: 0; font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; }
    
    header { 
      position: sticky; top: 0; background: var(--header-bg); backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border); padding: 1rem; z-index: 1000;
      display: flex; justify-content: space-between; align-items: center;
    }

    .dashboard { display: flex; max-width: 1400px; margin: 20px auto; gap: 20px; padding: 0 20px; align-items: flex-start; }
    
    /* Barre Lat√©rale Fixe */
    aside { width: 320px; position: sticky; top: 100px; flex-shrink: 0; display: flex; flex-direction: column; gap: 15px; }
    
    .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 1.2rem; }
    
    /* Sant√© Mentale Slider */
    .san-display { font-size: 1.5rem; font-weight: 900; color: var(--accent); text-align: center; margin: 10px 0; }
    input[type=range] { width: 100%; cursor: pointer; accent-color: var(--accent); }

    /* Preuves */
    .proof-item { padding: 8px 0; border-bottom: 1px solid #232a37; }
    .btn-group { display: flex; gap: 4px; margin-top: 5px; }
    .btn-action { flex: 1; border: 1px solid var(--border); background: #1e2533; color: var(--muted); padding: 6px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: bold; }
    .btn-action[data-state="include"] { background: var(--success); color: #000; }
    .btn-action[data-state="exclude"] { background: var(--danger); color: #fff; }

    /* Grille des Fant√¥mes */
    .ghost-container { flex-grow: 1; }
    .ghost-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 15px; }
    
    .ghost-card { 
        background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; 
        padding: 1.2rem; transition: 0.3s; position: relative; opacity: 0.4; filter: grayscale(0.8);
    }
    .ghost-card.candidate { opacity: 1; filter: none; border-color: var(--accent); box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
    .ghost-card.can-hunt { border-left: 4px solid var(--danger); }

    .ghost-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .ghost-name { font-size: 1.2rem; font-weight: 800; }
    .hunt-tag { font-size: 0.7rem; color: var(--danger); font-weight: bold; }
    
    .badge-list { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 12px; }
    .badge { font-size: 0.7rem; padding: 3px 8px; background: #0b0e14; border-radius: 4px; border: 1px solid var(--border); }
    .badge.ok { color: var(--success); border-color: var(--success); }
    
    .secrets-btn { width: 100%; padding: 8px; background: #2d3748; border: none; color: white; border-radius: 6px; cursor: pointer; font-size: 0.8rem; }
    .secrets-content { margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.2); border-left: 3px solid var(--accent); font-size: 0.85rem; display: none; }
    .secrets-content.open { display: block; }

    @media (max-width: 900px) { .dashboard { flex-direction: column; } aside { width: 100%; position: relative; top: 0; } }
  </style>
</head>
<body>

<header>
  <div style="font-weight:900; color:var(--accent)">PHASMO-TRACKER <span style="font-weight:300">v3.0</span></div>
  <button onclick="resetAll()" style="background:var(--danger); border:none; color:white; padding:8px 15px; border-radius:6px; cursor:pointer; font-weight:bold">NOUVELLE CHASSE</button>
</header>

<main class="dashboard">
  <aside>
    <div class="card">
      <h2>Sant√© Mentale üß†</h2>
      <div class="san-display" id="san-val">100%</div>
      <input type="range" id="san-slider" min="0" max="100" value="100" oninput="updateSan(this.value)">
      <p style="font-size:0.7rem; color:var(--muted); margin-top:5px">Glissez pour voir qui peut chasser.</p>
    </div>

    <div class="card">
      <h2>Preuves üîé</h2>
      <div id="proof-list"></div>
    </div>
  </aside>

  <section class="ghost-container">
    <div class="ghost-grid" id="ghost-display"></div>
  </section>
</main>

<script>
const PROOFS = [
  { id:'emf', label:'üì∂ EMF Niveau 5' }, { id:'orbe', label:'üîÆ Orbe' },
  { id:'spirit', label:'üìª Spirit Box' }, { id:'freezing', label:'‚ùÑÔ∏è Temp. Glaciales' },
  { id:'uv', label:'üë£ Traces UV' }, { id:'dots', label:'üü¢ D.O.T.S' }, { id:'writing', label:'üìñ √âcriture' }
];

const GHOST_DATA = [
  { name:'Esprit', proofs:['emf','spirit','writing'], threshold: 50, speed:"1.7 m/s", test:"Encens : Inactif pendant 180s (au lieu de 90s)." },
  { name:'Spectre', proofs:['dots','emf','spirit'], threshold: 50, speed:"1.7 m/s", test:"Sel : Ne laisse jamais d'empreinte de pas. Peut se t√©l√©porter (EMF 2)." },
  { name:'Fant√¥me', proofs:['dots','uv','spirit'], threshold: 50, speed:"1.7 m/s", test:"Photo : Dispara√Æt si pris en photo. Clignote lentement en chasse." },
  { name:'Poltergeist', proofs:['uv','spirit','writing'], threshold: 50, speed:"1.7 m/s", test:"Lancer : Peut jeter plusieurs objets (2% SAN/objet)." },
  { name:'Banshee', proofs:['dots','orbe','uv'], threshold: 50, speed:"1.7 m/s", test:"Micro Parabolique : Cri rare unique. Cible un seul joueur." },
  { name:'Djinn', proofs:['emf','uv','freezing'], threshold: 50, speed:"1.7-2.5m/s", test:"Courant : Ne coupe jamais le disjoncteur. Acc√©l√®re si courant ON." },
  { name:'Jument', proofs:['orbe','spirit','writing'], threshold: 60, speed:"1.7 m/s", test:"Lumi√®re : Chasse √† 60% (Noir) ou 40% (Allum√©). √âteint les lampes." },
  { name:'Revenant', proofs:['orbe','writing','freezing'], threshold: 50, speed:"1.1-3.0m/s", test:"Ligne de vue : Tr√®s lent si cach√©, missile s'il vous voit." },
  { name:'Ombre', proofs:['emf','writing','freezing'], threshold: 35, speed:"1.7 m/s", test:"Timide : Ne chasse pas si vous √™tes group√©s. Tr√®s peu actif." },
  { name:'D√©mon', proofs:['writing','uv','freezing'], threshold: 70, speed:"1.7 m/s", test:"Crucifix : Port√©e 5m. Peut chasser √† n'importe quel moment (Capacit√©)." },
  { name:'Yurei', proofs:['dots','orbe','freezing'], threshold: 50, speed:"1.7 m/s", test:"Porte : Claque les portes (15% SAN). Encens le bloque 90s." },
  { name:'Oni', proofs:['dots','emf','freezing'], threshold: 50, speed:"1.7 m/s", test:"Actif : Clignote peu en chasse. Pas de boule de fum√©e." },
  { name:'Yokai', proofs:['dots','orbe','spirit'], threshold: 80, speed:"1.7 m/s", test:"Voix : Chasse t√¥t si vous parlez. Sourd au-del√† de 2m." },
  { name:'Hantu', proofs:['orbe','uv','freezing'], threshold: 50, speed:"1.4-2.7m/s", test:"Froid : Rapide dans le froid. Bu√©e buccale si courant OFF." },
  { name:'Goryo', proofs:['dots','emf','uv'], threshold: 50, speed:"1.7 m/s", test:"D.O.T.S : Uniquement sur cam√©ra. Ne change jamais de pi√®ce." },
  { name:'Myling', proofs:['writing','emf','uv'], threshold: 50, speed:"1.7 m/s", test:"Silencieux : Pas audibles seulement si lampe clignote." },
  { name:'Onryo', proofs:['orbe','freezing','spirit'], threshold: 60, speed:"1.7 m/s", test:"Bougie : √âteindre 3 bougies = Chasse. Flamme = Crucifix." },
  { name:'Les Jumeaux', proofs:['emf','freezing','spirit'], threshold: 50, speed:"1.5-1.9m/s", test:"Double : Interactions simultan√©es √† deux endroits." },
  { name:'Raiju', proofs:['dots','emf','orbe'], threshold: 65, speed:"1.7-2.5m/s", test:"√âlectronique : Acc√©l√®re pr√®s des objets allum√©s au sol." },
  { name:'Obake', proofs:['emf','orbe','uv'], threshold: 50, speed:"1.7 m/s", test:"6 Doigts : Chance d'empreinte unique. Change de forme en chasse." },
  { name:'Le Mimic', proofs:['spirit','uv','freezing'], threshold: 50, speed:"Variable", test:"4√®me Preuve : Toujours des Orbes (Factice) en plus du reste." },
  { name:'Moroi', proofs:['spirit','writing','freezing'], threshold: 50, speed:"1.5-2.2m/s", test:"Mal√©diction : Plus vous √™tes fou, plus il court vite." },
  { name:'Deogen', proofs:['dots','writing','spirit'], threshold: 40, speed:"3.0-0.4m/s", test:"Loop : Sait o√π vous √™tes. Ralentit quand il est sur vous." },
  { name:'Thaye', proofs:['dots','orbe','writing'], threshold: 75, speed:"2.7-1.0m/s", test:"√Çge : Tr√®s actif au d√©but, s'√©puise avec le temps." }
];

let state = { include: [], exclude: [], san: 100 };

function updateSan(v) { 
    state.san = v; 
    document.getElementById('san-val').textContent = v + "%";
    render(); 
}

function render() {
  document.getElementById('proof-list').innerHTML = PROOFS.map(p => {
    const isInc = state.include.includes(p.id);
    const isExc = state.exclude.includes(p.id);
    return `<div class="proof-item"><span style="font-size:0.85rem;font-weight:600">${p.label}</span><div class="btn-group">
      <button class="btn-action" data-state="${isInc?'include':''}" onclick="toggleProof('${p.id}','include')">OUI</button>
      <button class="btn-action" data-state="${isExc?'exclude':''}" onclick="toggleProof('${p.id}','exclude')">NON</button>
      <button class="btn-action" onclick="toggleProof('${p.id}','clear')">CLR</button>
    </div></div>`;
  }).join('');

  document.getElementById('ghost-display').innerHTML = GHOST_DATA.map(g => {
    let gp = [...g.proofs]; if(g.name === 'Le Mimic') gp.push('orbe');
    const isCandidate = state.include.every(id => gp.includes(id)) && state.exclude.every(id => !gp.includes(id));
    const canHunt = state.san <= g.threshold;
    
    return `
      <div class="ghost-card ${isCandidate ? 'candidate' : ''} ${canHunt && isCandidate ? 'can-hunt' : ''}">
        <div class="ghost-header">
          <div class="ghost-name">${g.name}</div>
          <div class="hunt-tag">${canHunt ? '‚ö†Ô∏è CHASSE POSSIBLE' : ''}</div>
        </div>
        <div style="font-size:0.7rem; color:var(--warning); margin-bottom:8px">Seuil : ${g.threshold}% | Vitesse : ${g.speed}</div>
        <div class="badge-list">
          ${g.proofs.map(pID => `<span class="badge ${state.include.includes(pID)?'ok':''}">${PROOFS.find(x=>x.id===pID).label}</span>`).join('')}
        </div>
        <button class="secrets-btn" onclick="this.nextElementSibling.classList.toggle('open')">PRO-TESTS ‚ñº</button>
        <div class="secrets-content"><strong>Capacit√© :</strong> ${g.test}</div>
      </div>
    `;
  }).join('');
}

function toggleProof(id, action) {
  state.include = state.include.filter(x => x !== id);
  state.exclude = state.exclude.filter(x => x !== id);
  if (action === 'include') state.include.push(id);
  if (action === 'exclude') state.exclude.push(id);
  render();
}

function resetAll() { state = { include: [], exclude: [], san: 100 }; document.getElementById('san-slider').value = 100; updateSan(100); }
render();
</script>
</body>
</html>
