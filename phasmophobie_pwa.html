
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#111111" />
  <title>Phasmo Guide â€“ Filtres par preuves</title>

  <style>
    :root{
      --bg:#0f1115; --panel:#141722; --muted:#9aa3b2; --text:#e6e9ef; --accent:#5eead4; --chip:#1f2433;
      --danger:#ef4444; --ok:#22c55e; --border:#202534;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background:linear-gradient(180deg,#0d1016, #0f1115 15%) fixed; color:var(--text);
    }
    header{
      position:sticky; top:0; z-index:10; background:rgba(15,17,21,.85); backdrop-filter:saturate(1.2) blur(6px);
      border-bottom:1px solid var(--border);
    }
    .wrap{max-width:1100px; margin:0 auto; padding:14px 16px;}
    .title{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .badge{font-size:12px; padding:4px 8px; border:1px solid var(--border); border-radius:999px; color:var(--muted)}
    .grid{display:grid; grid-template-columns:1fr; gap:14px}
    @media (min-width:900px){ .grid{grid-template-columns: 320px 1fr} }
    .panel{
      background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:12px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    h2{font-size:16px; margin:6px 0 10px; color:#cbd5e1}
    .evidences{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:8px}
    @media (min-width:520px){.evidences{grid-template-columns:repeat(3,minmax(0,1fr))}}
    label.chk{
      display:flex; align-items:center; gap:8px; background:#111522; border:1px solid var(--border); padding:10px 12px; border-radius:10px; cursor:pointer;
      transition: border-color .2s, background .2s, transform .02s;
      user-select:none;
    }
    label.chk:active{ transform:scale(.99) }
    input[type=checkbox]{width:18px; height:18px; margin:0}
    .actions{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
    button{
      border:1px solid var(--border); background:#101523; color:var(--text); padding:10px 12px; border-radius:10px; cursor:pointer;
    }
    button.primary{ background:linear-gradient(135deg,#0f766e,#14b8a6); border:none; }
    button.ghost{ background:transparent }
    .results-header{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:6px}
    .count{font-size:13px; color:var(--muted)}
    .cards{display:grid; grid-template-columns:repeat(auto-fill, minmax(220px, 1fr)); gap:12px}
    .card{
      background:#101523; border:1px solid var(--border); padding:12px; border-radius:12px; min-height:110px; display:flex; flex-direction:column; gap:8px;
    }
    .ghost{font-weight:600; letter-spacing:.2px}
    .chips{display:flex; flex-wrap:wrap; gap:6px}
    .chip{
      background:var(--chip); color:#d0d6e1; font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--border)
    }
    .empty{
      border:1px dashed var(--border); background:#0f1320; color:#cbd5e1; border-radius:12px; padding:20px; text-align:center
    }
    footer{ color:var(--muted); font-size:12px; text-align:center; padding:18px 0 40px}
    a{color:var(--accent); text-decoration:none}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <h1 style="margin:0;font-size:18px">Phasmo Guide</h1>
        <span class="badge">PWA â€“ Filtres par preuves</span>
      </div>
    </div>
  </header>

  <main class="wrap" style="margin-top:12px">
    <div class="grid">
      <!-- Panneau filtres -->
      <section class="panel">
        <h2>Choisis tes preuves</h2>
        <div class="evidences" id="evidences">
          <!-- Les cases Ã  cocher sont crÃ©Ã©es par JS Ã  partir de EVIDENCES -->
        </div>
        <div class="actions">
          <button id="reset" class="ghost">Tout effacer</button>
          <button id="share" class="primary">Partager ces filtres</button>
        </div>
        <p class="muted" style="margin-top:8px">
          ðŸ›ˆ Astuce : lâ€™URL se met Ã  jour (ex. <code>?p=EMF5,DOTS</code>) et tu peux la partager.
        </p>
      </section>

      <!-- Panneau rÃ©sultats -->
      <section class="panel">
        <div class="results-header">
          <h2>RÃ©sultats</h2>
          <div class="count" id="count">0 fantÃ´me</div>
        </div>
        <div id="empty" class="empty">
          SÃ©lectionne au moins <b>une preuve</b> pour commencer.
        </div>
        <div id="cards" class="cards" hidden></div>
      </section>
    </div>

    <footer>
      <div>Ne rien afficher tant quâ€™aucun filtre nâ€™est choisi âœ…</div>
      <div class="muted" style="margin-top:4px">
        (Tu peux adapter la liste des fantÃ´mes / preuves dans le code ciâ€‘dessous)
      </div>
    </footer>
  </main>

  <script type="module">
    /* ---------------------------------------------
     * 1) DÃ‰FINITION DES PREUVES (FR)
     * ------------------------------------------- */
    const EVIDENCES = [
      { key: 'EMF5',        label: 'EMF Niveau 5' },
      { key: 'SPIRIT_BOX',  label: 'Spirit Box' },
      { key: 'ORBS',        label: 'Orbes' },
      { key: 'FINGER',      label: 'Empreintes' },
      { key: 'FREEZING',    label: 'TempÃ©ratures glaciales' },
      { key: 'WRITING',     label: 'Ã‰criture' },
      { key: 'DOTS',        label: 'D.O.T.S' }
    ];

    /* ---------------------------------------------
     * 2) DONNÃ‰ES MINIMALES DES FANTÃ”MES
     * (liste courante â€“ ajuste si besoin)
     * ------------------------------------------- */
    const GHOSTS = [
      { name:'Spirit',       evidences:['EMF5','SPIRIT_BOX','WRITING'] },
      { name:'Wraith',       evidences:['EMF5','SPIRIT_BOX','DOTS'] },
      { name:'Phantom',      evidences:['SPIRIT_BOX','FINGER','DOTS'] },
      { name:'Poltergeist',  evidences:['SPIRIT_BOX','FINGER','WRITING'] },
      { name:'Banshee',      evidences:['FINGER','ORBS','DOTS'] },
      { name:'Jinn',         evidences:['EMF5','FINGER','FREEZING'] },
      { name:'Mare',         evidences:['SPIRIT_BOX','ORBS','WRITING'] },
      { name:'Revenant',     evidences:['ORBS','WRITING','FREEZING'] },
      { name:'Shade',        evidences:['EMF5','WRITING','FREEZING'] },
      { name:'Demon',        evidences:['FINGER','WRITING','FREEZING'] },
      { name:'Yurei',        evidences:['ORBS','FREEZING','DOTS'] },
      { name:'Oni',          evidences:['EMF5','FREEZING','DOTS'] },
      { name:'Yokai',        evidences:['SPIRIT_BOX','ORBS','DOTS'] },
      { name:'Hantu',        evidences:['FINGER','ORBS','FREEZING'] },
      { name:'Goryo',        evidences:['EMF5','FINGER','DOTS'] },
      { name:'Myling',       evidences:['EMF5','FINGER','WRITING'] },
      { name:'Onryo',        evidences:['SPIRIT_BOX','ORBS','FREEZING'] },
      { name:'The Twins',    evidences:['EMF5','SPIRIT_BOX','FREEZING'] },
      { name:'Raiju',        evidences:['EMF5','ORBS','DOTS'] },
      { name:'Obake',        evidences:['EMF5','FINGER','ORBS'] },
      { name:'The Mimic',    evidences:['SPIRIT_BOX','FINGER','FREEZING'] }, /* + faux Orbs */
      { name:'Moroi',        evidences:['SPIRIT_BOX','WRITING','FREEZING'] },
      { name:'Deogen',       evidences:['SPIRIT_BOX','WRITING','DOTS'] },
      { name:'Thaye',        evidences:['ORBS','WRITING','DOTS'] }
    ];

    /* ---------------------------------------------
     * 3) UI â€“ GÃ‰NÃ‰RATION DES CASES Ã€ COCHER
     * ------------------------------------------- */
    const $evRoot = document.getElementById('evidences');
    const $cards  = document.getElementById('cards');
    const $empty  = document.getElementById('empty');
    const $count  = document.getElementById('count');
    const $reset  = document.getElementById('reset');
    const $share  = document.getElementById('share');

    function makeId(str){ return 'ev_' + str.toLowerCase().replace(/[^a-z0-9]+/g,'_') }

